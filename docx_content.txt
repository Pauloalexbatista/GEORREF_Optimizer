üìã Especifica√ß√£o do Projeto: Otimizador de Rotas "Low-Cost"
1. O Objetivo Principal
Criar um software de planeamento de rotas acess√≠vel para pequenas distribuidoras, que substitua o planeamento manual/emp√≠rico por uma solu√ß√£o otimizada, sem os custos elevados de licen√ßas de software corporativo.
2. A Estrat√©gia de Dados (O "Cora√ß√£o" do Sistema)
Base de Dados Mestre: Utiliza√ß√£o de um ficheiro propriet√°rio existente com 300.000 moradas georreferenciadas de Portugal.
Valida√ß√£o Inicial (Sanity Check): Antes de usar o ficheiro, correr um script para:
Validar se as coordenadas caem dentro do ret√¢ngulo de Portugal.
Verificar sistemas de coordenadas incorretos.
Fazer uma auditoria por amostragem (comparar 20 linhas aleat√≥rias com o OpenStreetMap).
3. O Algoritmo de Georreferencia√ß√£o em "Cascata" (Waterfall)
Para cada nova morada inserida por um cliente, o sistema segue esta ordem estrita para garantir custo zero e m√°xima precis√£o:
Prioridade A (Local): Procura a morada no Ficheiro Mestre (300k).
Custo: 0‚Ç¨ | Velocidade: Imediata.
Prioridade B (Open Source): Se n√£o encontrar, consulta o Nominatim (OpenStreetMap).
Custo: 0‚Ç¨ | Velocidade: Lenta (limite de pedidos).
Prioridade C (Fallback Premium): Se o OSM falhar, consulta a Google Maps API.
Custo: Usa o cr√©dito gratuito.
A√ß√£o: O resultado √© gravado imediatamente no Ficheiro Mestre para n√£o voltar a gastar cr√©dito no futuro.
4. N√≠veis de Precis√£o e Confian√ßa (Quality Score)
As moradas n√£o s√£o bin√°rias (Encontrou/N√£o Encontrou). S√£o classificadas por qualidade para ajudar o motorista e o algoritmo:
N√≠vel 1 (Ouro): Exato (Porta/Rooftop). Confian√ßa total.
N√≠vel 2 (Prata): Rua correta. Motorista procura o n√∫mero.
N√≠vel 3 (Bronze): C√≥digo Postal 7 d√≠gitos (Centroide). Zona correta.
N√≠vel 4 (Ferro): C√≥digo Postal 4 d√≠gitos + Localidade. Motorista tem de ligar ao cliente.
N√≠vel 5 (Erro): Falha total. Requer interven√ß√£o humana.
5. Manuten√ß√£o Autom√°tica (O "Crawler Noturno")
Rotina Di√°ria: Um script corre todas as noites (ex: 03:00 AM).
Limite: Processa at√© 1.300 moradas/dia (para ficar dentro do limite gr√°tis de $200 do Google).
Alvo: Tenta melhorar moradas de N√≠vel 3 e 4 para N√≠vel 1, atualizando o Ficheiro Mestre permanentemente.
6. Motor de Otimiza√ß√£o e Regras
Tecnologia: Utilizar a biblioteca Google OR-Tools (Open Source).
Matriz de Dist√¢ncias: Utilizar OSRM (Open Source Routing Machine) para calcular tempos e dist√¢ncias entre pontos sem custos.
L√≥gica de Buffer: Se a morada for de N√≠vel 3 ou 4 (pouca precis√£o), o algoritmo adiciona automaticamente uma margem de tempo extra (buffer) √† paragem para compensar a procura.
Restri√ß√µes: Capacidade de carga (kg/vol) e Janelas Hor√°rias.
7. Interface e Opera√ß√£o
Tratamento de Exce√ß√µes: Dashboard para humanos resolverem moradas de "N√≠vel 5".
Output: Visualiza√ß√£o de rotas em mapa interativo (Folium/Leaflet) e lista ordenada para o motorista.
Escalabilidade: Arquitetura pronta para migrar para Web (Python Django/Flask).
Podes copiar e colar este texto. Ele cobre tudo o que discutimos, desde a l√≥gica de custos at√© √† hierarquia t√©cnica das moradas! Est√°s pronto para arrancar com o "Antigravity". üöÄ